<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Cms::PageHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Cms::PageHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/app/helpers/cms/page_helper_rb.html">
                app/helpers/cms/page_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000551">able_to?</a>&nbsp;&nbsp;
      <a href="#M000548">cms_toolbar</a>&nbsp;&nbsp;
      <a href="#M000546">container</a>&nbsp;&nbsp;
      <a href="#M000547">container_has_block?</a>&nbsp;&nbsp;
      <a href="#M000545">current_page</a>&nbsp;&nbsp;
      <a href="#M000544">page_title</a>&nbsp;&nbsp;
      <a href="#M000549">render_breadcrumbs</a>&nbsp;&nbsp;
      <a href="#M000550">render_portlet</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000551" class="method-detail">
        <a name="M000551"></a>

        <div class="method-heading">
          <a href="#M000551" class="method-signature">
          <span class="method-name">able_to?</span><span class="method-args">(*perms) {|if current_user.able_to?(*perms)| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Determines if the current_user is able to do specific permissions.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000551-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000551-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 87</span>
87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">perms</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
88:       <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">able_to?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">perms</span>)
89:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000548" class="method-detail">
        <a name="M000548"></a>

        <div class="method-heading">
          <a href="#M000548" class="method-signature">
          <span class="method-name">cms_toolbar</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000548-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000548-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 34</span>
34:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cms_toolbar</span>
35:       <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@content_for_layout&quot;</span>)
36:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000546" class="method-detail">
        <a name="M000546"></a>

        <div class="method-heading">
          <a href="#M000546" class="method-signature">
          <span class="method-name">container</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000546-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000546-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">container</span>(<span class="ruby-identifier">name</span>)
16:       <span class="ruby-identifier">content</span> = <span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-node">&quot;@content_for_#{name}&quot;</span>)
17:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@page</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;edit&quot;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">able_to_edit?</span>(<span class="ruby-ivar">@page</span>)
18:         <span class="ruby-identifier">render</span> <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cms/pages/edit_container'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">content</span>}
19:       <span class="ruby-keyword kw">else</span>
20:         <span class="ruby-identifier">content</span>
21:       <span class="ruby-keyword kw">end</span>
22:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000547" class="method-detail">
        <a name="M000547"></a>

        <div class="method-heading">
          <a href="#M000547" class="method-signature">
          <span class="method-name">container_has_block?</span><span class="method-args">(name, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000547-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000547-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 24</span>
24:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">container_has_block?</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
25:       <span class="ruby-identifier">has_block</span> = (<span class="ruby-ivar">@mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;edit&quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">connectable_count_for_container</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
26:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-node">&quot;mode = #{@mode}, has_block = #{has_block}&quot;</span>
27:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
28:         <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">capture</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">has_block</span>
29:       <span class="ruby-keyword kw">else</span>
30:         <span class="ruby-identifier">has_block</span>
31:       <span class="ruby-keyword kw">end</span>
32:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000545" class="method-detail">
        <a name="M000545"></a>

        <div class="method-heading">
          <a href="#M000545" class="method-signature">
          <span class="method-name">current_page</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000545-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000545-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 11</span>
11:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_page</span>
12:       <span class="ruby-ivar">@page</span>
13:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000544" class="method-detail">
        <a name="M000544"></a>

        <div class="method-heading">
          <a href="#M000544" class="method-signature">
          <span class="method-name">page_title</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000544-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000544-source">
<pre>
   <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 3</span>
3:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">page_title</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
4:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>
5:         <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@template&quot;</span>).<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@page_title&quot;</span>, <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>)
6:       <span class="ruby-keyword kw">else</span>
7:         <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@template&quot;</span>).<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@page_title&quot;</span>)
8:       <span class="ruby-keyword kw">end</span>
9:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000549" class="method-detail">
        <a name="M000549"></a>

        <div class="method-heading">
          <a href="#M000549" class="method-signature">
          <span class="method-name">render_breadcrumbs</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Renders breadcrumbs based on the <a
href="PageHelper.html#M000545">current_page</a>. This will generate an
unordered list representing the current page and all it&#8216;s ancestors
including the root name of of the site. The UL can be styled via CSS for
layout purposes. Each breadcrumb except the last will be linked to the page
in question.
</p>
<p>
If the <a href="PageHelper.html#M000545">current_page</a> is nil, it will
return an empty string.
</p>
<h4>Params:</h4>
<pre>
  options = A hash of options which determine how the breadcrumbs will be laid out.
</pre>
<h4>Options:</h4>
<ul>
<li><tt>:from_top</tt> - How many below levels from the root the tree should
start at. All sections at this level will be shown. The default is 0, which
means show all nodes that are direct children of the root.

</li>
<li><tt>:show_parent</tt> - Determines if the name of the page itself show be
shown as a breadcrumb link. Defaults to false, meaning that the parent
section of the current page will be the &#8216;last&#8217; breadcrumb link.
(Note: This probably better renamed as &#8216;show_page&#8217;).

</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000549-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000549-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 55</span>
55:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_breadcrumbs</span>(<span class="ruby-identifier">options</span>={})
56:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_page</span>
57: 
58:       <span class="ruby-identifier">start</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:from_top</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
59:       <span class="ruby-identifier">show_parent</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:show_parent</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-value">? </span><span class="ruby-keyword kw">false</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:show_parent</span>]
60:       <span class="ruby-identifier">ancestors</span> = <span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">ancestors</span>
61:       <span class="ruby-identifier">items</span> = []
62:       <span class="ruby-identifier">ancestors</span>[<span class="ruby-identifier">start</span><span class="ruby-operator">..</span><span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">size</span>].<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">sec</span>,<span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
63:         <span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:li</span>, 
64:           <span class="ruby-identifier">link_to</span>(<span class="ruby-identifier">h</span>(<span class="ruby-identifier">sec</span>.<span class="ruby-identifier">name</span>), <span class="ruby-identifier">sec</span>.<span class="ruby-identifier">actual_path</span>), 
65:           (<span class="ruby-identifier">i</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> {<span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first&quot;</span>} <span class="ruby-operator">:</span> {}))
66:       <span class="ruby-keyword kw">end</span>
67:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">show_parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">path</span>
68:         <span class="ruby-identifier">items</span>[<span class="ruby-identifier">items</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>] = <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:li</span>, <span class="ruby-identifier">h</span>(<span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">section</span>.<span class="ruby-identifier">name</span>))
69:       <span class="ruby-keyword kw">else</span>
70:         <span class="ruby-identifier">items</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:li</span>, <span class="ruby-identifier">h</span>(<span class="ruby-identifier">current_page</span>.<span class="ruby-identifier">page_title</span>))
71:       <span class="ruby-keyword kw">end</span>
72:       <span class="ruby-identifier">content_tag</span>(<span class="ruby-identifier">:ul</span>, <span class="ruby-node">&quot;\n  #{items.join(&quot;\n  &quot;)}\n&quot;</span>, <span class="ruby-identifier">:class</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;breadcrumbs&quot;</span>)
73:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000550" class="method-detail">
        <a name="M000550"></a>

        <div class="method-heading">
          <a href="#M000550" class="method-signature">
          <span class="method-name">render_portlet</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000550-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000550-source">
<pre>
    <span class="ruby-comment cmt"># File app/helpers/cms/page_helper.rb, line 75</span>
75:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render_portlet</span>(<span class="ruby-identifier">name</span>)
76:       <span class="ruby-identifier">portlets</span> = <span class="ruby-constant">Portlet</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = ?&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>])
77:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">portlets</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
78:         <span class="ruby-ivar">@mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;edit&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;ERROR: Multiple Portlets with name '#{name}'&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
79:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">portlets</span>.<span class="ruby-identifier">empty?</span>
80:         <span class="ruby-ivar">@mode</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;edit&quot;</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;ERROR: No Portlet with name '#{name}'&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
81:       <span class="ruby-keyword kw">else</span>
82:         <span class="ruby-identifier">render_connectable</span>(<span class="ruby-identifier">portlets</span>.<span class="ruby-identifier">first</span>)
83:       <span class="ruby-keyword kw">end</span>
84:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>