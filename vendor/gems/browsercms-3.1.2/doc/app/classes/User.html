<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: User</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">User</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/user_rb.html">
                app/models/user.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                ActiveRecord::Base
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000036">able_to?</a>&nbsp;&nbsp;
      <a href="#M000039">able_to_edit?</a>&nbsp;&nbsp;
      <a href="#M000041">able_to_edit_or_publish_content?</a>&nbsp;&nbsp;
      <a href="#M000038">able_to_modify?</a>&nbsp;&nbsp;
      <a href="#M000040">able_to_publish?</a>&nbsp;&nbsp;
      <a href="#M000037">able_to_view?</a>&nbsp;&nbsp;
      <a href="#M000023">cms_access?</a>&nbsp;&nbsp;
      <a href="#M000019">current</a>&nbsp;&nbsp;
      <a href="#M000020">current=</a>&nbsp;&nbsp;
      <a href="#M000024">disable</a>&nbsp;&nbsp;
      <a href="#M000025">disable!</a>&nbsp;&nbsp;
      <a href="#M000027">enable</a>&nbsp;&nbsp;
      <a href="#M000028">enable!</a>&nbsp;&nbsp;
      <a href="#M000026">expired?</a>&nbsp;&nbsp;
      <a href="#M000032">expires_at_formatted</a>&nbsp;&nbsp;
      <a href="#M000029">full_name</a>&nbsp;&nbsp;
      <a href="#M000031">full_name_or_login</a>&nbsp;&nbsp;
      <a href="#M000030">full_name_with_login</a>&nbsp;&nbsp;
      <a href="#M000021">guest</a>&nbsp;&nbsp;
      <a href="#M000022">guest?</a>&nbsp;&nbsp;
      <a href="#M000035">modifiable_sections</a>&nbsp;&nbsp;
      <a href="#M000033">permissions</a>&nbsp;&nbsp;
      <a href="#M000034">viewable_sections</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="Cms/Authentication/Model.html">Cms::Authentication::Model</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="#M000019" class="method-signature">
          <span class="method-name">current</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000019-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000019-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">current</span>
27:     <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-identifier">:cms_user</span>]
28:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="#M000020" class="method-signature">
          <span class="method-name">current=</span><span class="method-args">(user)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000020-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000020-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 29</span>
29:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">current=</span>(<span class="ruby-identifier">user</span>)
30:     <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-identifier">:cms_user</span>] = <span class="ruby-identifier">user</span>
31:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="#M000021" class="method-signature">
          <span class="method-name">guest</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000021-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000021-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">guest</span>(<span class="ruby-identifier">options</span> = {})
34:     <span class="ruby-constant">GuestUser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">options</span>)
35:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">able_to?</span><span class="method-args">(*required_permissions)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Expects a list of names of Permissions true if the user has any of the <a
href="User.html#M000033">permissions</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">required_permissions</span>)
112:     <span class="ruby-identifier">perms</span> = <span class="ruby-identifier">required_permissions</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_sym</span>)
113:     <span class="ruby-identifier">permissions</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> 
114:       <span class="ruby-identifier">perms</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>) 
115:     <span class="ruby-keyword kw">end</span>
116:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">able_to_edit?</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Expects node to be a <a href="Section.html">Section</a>, <a
href="Page.html">Page</a> or <a href="Link.html">Link</a> Returns true if
the specified node, or any of its ancestor sections, is editable by any of
the user&#8216;s &#8216;CMS <a href="User.html">User</a>&#8217; groups.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 157</span>
157:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to_edit?</span>(<span class="ruby-identifier">object</span>)    
158:     <span class="ruby-identifier">able_to?</span>(<span class="ruby-identifier">:edit_content</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">able_to_modify?</span>(<span class="ruby-identifier">object</span>)
159:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">able_to_edit_or_publish_content?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to_edit_or_publish_content?</span>
166:     <span class="ruby-identifier">able_to?</span>(<span class="ruby-identifier">:edit_content</span>, <span class="ruby-identifier">:publish_content</span>)
167:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">able_to_modify?</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to_modify?</span>(<span class="ruby-identifier">object</span>)
140:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">object</span>
141:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Section</span>
142:         <span class="ruby-identifier">modifiable_sections</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">object</span>)
143:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Page</span>, <span class="ruby-constant">Link</span>
144:         <span class="ruby-identifier">modifiable_sections</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">object</span>.<span class="ruby-identifier">section</span>)
145:       <span class="ruby-keyword kw">else</span>
146:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:connectable?</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">connectable?</span>
147:           <span class="ruby-identifier">object</span>.<span class="ruby-identifier">connected_pages</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span> <span class="ruby-identifier">able_to_modify?</span>(<span class="ruby-identifier">page</span>) }
148:         <span class="ruby-keyword kw">else</span>
149:           <span class="ruby-keyword kw">true</span>
150:         <span class="ruby-keyword kw">end</span>
151:     <span class="ruby-keyword kw">end</span>
152:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">able_to_publish?</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to_publish?</span>(<span class="ruby-identifier">object</span>)
162:     <span class="ruby-identifier">able_to?</span>(<span class="ruby-identifier">:publish_content</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">able_to_modify?</span>(<span class="ruby-identifier">object</span>)
163:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">able_to_view?</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Determine if this user has permission to view the specific object.
Permissions
</p>
<pre>
  are always tied to a specific section. This method can take different input parameters
  and will attempt to determine the relevant section to check.
</pre>
<p>
Expects object to be of type:
</p>
<pre>
  1. Section - Will check the user's groups to see if any of those groups can view this section.
  2. Path - Will look up the section based on the path, then check it.  (Note that section paths are not currently unique, so this will check the first one it finds).
  3. Other - Assumes it has a section attribute and will call that and check the return value.
</pre>
<p>
Returns: true if the user can view this object, false otherwise. Raises:
ActiveRecord::RecordNotFound if a path to a not existent section is passed
in.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">able_to_view?</span>(<span class="ruby-identifier">object</span>)
129:     <span class="ruby-identifier">section</span> = <span class="ruby-identifier">object</span>
130:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
131:        <span class="ruby-identifier">section</span> = <span class="ruby-constant">Section</span>.<span class="ruby-identifier">find_by_path</span>(<span class="ruby-identifier">object</span>)
132:        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Could not find section with path = '#{object}'&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">section</span>
133:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Section</span>)
134:       <span class="ruby-identifier">section</span> = <span class="ruby-identifier">object</span>.<span class="ruby-identifier">section</span>
135:     <span class="ruby-keyword kw">end</span>
136:     <span class="ruby-identifier">viewable_sections</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">section</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">cms_access?</span>
137:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="#M000023" class="method-signature">
          <span class="method-name">cms_access?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Determines if this user should have access to the CMS administration tools.
Can be overridden by specific users (like <a
href="GuestUser.html">GuestUser</a>) which may not need to check the
database for that information.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000023-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000023-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 43</span>
43:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cms_access?</span>
44:     <span class="ruby-identifier">groups</span>.<span class="ruby-identifier">cms_access</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> 
45:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="#M000024" class="method-signature">
          <span class="method-name">disable</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000024-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000024-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 47</span>
47:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable</span>
48:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;expires_at is null and id != ?&quot;</span>, <span class="ruby-identifier">id</span>]) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
49:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">expires_at</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">minutes</span>
50:     <span class="ruby-keyword kw">else</span>
51:       <span class="ruby-keyword kw">false</span>
52:     <span class="ruby-keyword kw">end</span>
53:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000025" class="method-detail">
        <a name="M000025"></a>

        <div class="method-heading">
          <a href="#M000025" class="method-signature">
          <span class="method-name">disable!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000025-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000025-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">disable!</span>
56:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">disable</span>
57:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;You must have at least 1 enabled user&quot;</span>
58:     <span class="ruby-keyword kw">end</span>
59:     <span class="ruby-identifier">save!</span>
60:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000027" class="method-detail">
        <a name="M000027"></a>

        <div class="method-heading">
          <a href="#M000027" class="method-signature">
          <span class="method-name">enable</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000027-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000027-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enable</span>
67:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">expires_at</span> = <span class="ruby-keyword kw">nil</span>
68:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000028" class="method-detail">
        <a name="M000028"></a>

        <div class="method-heading">
          <a href="#M000028" class="method-signature">
          <span class="method-name">enable!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000028-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000028-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enable!</span>
71:     <span class="ruby-identifier">enable</span>
72:     <span class="ruby-identifier">save!</span>
73:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000026" class="method-detail">
        <a name="M000026"></a>

        <div class="method-heading">
          <a href="#M000026" class="method-signature">
          <span class="method-name">expired?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000026-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000026-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 62</span>
62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expired?</span>
63:     <span class="ruby-identifier">expires_at</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">expires_at</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
64:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">expires_at_formatted</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is to show a formated date on the input form. I&#8216;m unsure that
this is the best way to solve this, but it works.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 93</span>
93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expires_at_formatted</span>
94:     <span class="ruby-identifier">expires_at</span> <span class="ruby-value">? </span>(<span class="ruby-identifier">expires_at</span>.<span class="ruby-identifier">strftime</span> <span class="ruby-value str">'%m/%d/%Y'</span> )<span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
95:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000029" class="method-detail">
        <a name="M000029"></a>

        <div class="method-heading">
          <a href="#M000029" class="method-signature">
          <span class="method-name">full_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000029-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000029-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 75</span>
75:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_name</span>
76:     [<span class="ruby-identifier">first_name</span>, <span class="ruby-identifier">last_name</span>].<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">nil?</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot; &quot;</span>)
77:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">full_name_or_login</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_name_or_login</span>
84:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">full_name</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">blank?</span>
85:       <span class="ruby-identifier">login</span>
86:     <span class="ruby-keyword kw">else</span>
87:       <span class="ruby-identifier">full_name</span>
88:     <span class="ruby-keyword kw">end</span>
89:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000030" class="method-detail">
        <a name="M000030"></a>

        <div class="method-heading">
          <a href="#M000030" class="method-signature">
          <span class="method-name">full_name_with_login</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000030-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000030-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">full_name_with_login</span>
80:     <span class="ruby-node">&quot;#{full_name} (#{login})&quot;</span>
81:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="#M000022" class="method-signature">
          <span class="method-name">guest?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000022-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000022-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 37</span>
37:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">guest?</span>
38:     <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@guest</span>
39:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">modifiable_sections</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 105</span>
105:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">modifiable_sections</span>
106:     <span class="ruby-ivar">@modifiable_sections</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Section</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:groups</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:group_type</span>, <span class="ruby-identifier">:users</span>]}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;users.id = ? and group_types.cms_access = ?&quot;</span>, <span class="ruby-identifier">id</span>, <span class="ruby-keyword kw">true</span>])
107:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">permissions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/user.rb, line 97</span>
97:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">permissions</span>
98:     <span class="ruby-ivar">@permissions</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Permission</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:groups</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:users</span>}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;users.id = ?&quot;</span>, <span class="ruby-identifier">id</span>])
99:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">viewable_sections</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
     <span class="ruby-comment cmt"># File app/models/user.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">viewable_sections</span>
102:     <span class="ruby-ivar">@viewable_sections</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Section</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:groups</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:users</span>}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;users.id = ?&quot;</span>, <span class="ruby-identifier">id</span>])
103:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>