<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: PageRoute</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">PageRoute</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/models/page_route_rb.html">
                app/models/page_route.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                ActiveRecord::Base
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000186">add_condition</a>&nbsp;&nbsp;
      <a href="#M000187">add_requirement</a>&nbsp;&nbsp;
      <a href="#M000188">conditions_map</a>&nbsp;&nbsp;
      <a href="#M000192">execute</a>&nbsp;&nbsp;
      <a href="#M000191">options_map</a>&nbsp;&nbsp;
      <a href="#M000185">reload_routes</a>&nbsp;&nbsp;
      <a href="#M000189">requirements_map</a>&nbsp;&nbsp;
      <a href="#M000190">route_name</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000186" class="method-detail">
        <a name="M000186"></a>

        <div class="method-heading">
          <a href="#M000186" class="method-signature">
          <span class="method-name">add_condition</span><span class="method-args">(name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000186-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000186-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_condition</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
16:     <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)
17:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000187" class="method-detail">
        <a name="M000187"></a>

        <div class="method-heading">
          <a href="#M000187" class="method-signature">
          <span class="method-name">add_requirement</span><span class="method-args">(name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000187-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000187-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 19</span>
19:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_requirement</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
20:     <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_s</span>)
21:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000188" class="method-detail">
        <a name="M000188"></a>

        <div class="method-heading">
          <a href="#M000188" class="method-signature">
          <span class="method-name">conditions_map</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000188-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000188-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">conditions_map</span>
24:     <span class="ruby-identifier">conditions</span>.<span class="ruby-identifier">inject</span>({}){<span class="ruby-operator">|</span><span class="ruby-identifier">acc</span>, <span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">acc</span>[<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_sym</span>; <span class="ruby-identifier">acc</span>}
25:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000192" class="method-detail">
        <a name="M000192"></a>

        <div class="method-heading">
          <a href="#M000192" class="method-signature">
          <span class="method-name">execute</span><span class="method-args">(controller)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is called by an instance of the content controller in the process of
rendering a page. This will eval the code stored in this page route in the
context of the controller. The main purpose of this method is to set
instance variables that will be used by one or more portlets when the page
is rendered. To set an instance variable, the code should contain something
like:
</p>
<pre>
   @news_article = NewsArticle.find(params[:id]))
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000192-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000192-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 54</span>
54:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">controller</span>)
55:     <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-identifier">code</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">code</span>.<span class="ruby-identifier">blank?</span>
56:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000191" class="method-detail">
        <a name="M000191"></a>

        <div class="method-heading">
          <a href="#M000191" class="method-signature">
          <span class="method-name">options_map</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is used in defining the route in the ActionController::Routing
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000191-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000191-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">options_map</span>
37:     <span class="ruby-identifier">m</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;cms/content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show_page_route&quot;</span>}
38:     
39:     <span class="ruby-identifier">m</span>[<span class="ruby-identifier">:_page_route_id</span>] = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>
40:     
41:     <span class="ruby-identifier">m</span>[<span class="ruby-identifier">:requirements</span>] = <span class="ruby-identifier">requirements_map</span>
42:     <span class="ruby-identifier">m</span>[<span class="ruby-identifier">:conditions</span>] = <span class="ruby-identifier">conditions_map</span>
43:     
44:     <span class="ruby-identifier">m</span>
45:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000185" class="method-detail">
        <a name="M000185"></a>

        <div class="method-heading">
          <a href="#M000185" class="method-signature">
          <span class="method-name">reload_routes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000185-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000185-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 11</span>
11:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reload_routes</span>
12:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
13:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000189" class="method-detail">
        <a name="M000189"></a>

        <div class="method-heading">
          <a href="#M000189" class="method-signature">
          <span class="method-name">requirements_map</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000189-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000189-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">requirements_map</span>
28:     <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">inject</span>({}){<span class="ruby-operator">|</span><span class="ruby-identifier">acc</span>, <span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">acc</span>[<span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-constant">Regexp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">value</span>); <span class="ruby-identifier">acc</span>}
29:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000190" class="method-detail">
        <a name="M000190"></a>

        <div class="method-heading">
          <a href="#M000190" class="method-signature">
          <span class="method-name">route_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000190-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000190-source">
<pre>
    <span class="ruby-comment cmt"># File app/models/page_route.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">route_name</span>
32:     <span class="ruby-identifier">name</span> <span class="ruby-value">? </span><span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_slug</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'-'</span>,<span class="ruby-value str">'_'</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
33:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>